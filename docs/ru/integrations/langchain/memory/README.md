---
description: –£–∑–ª—ã –ø–∞–º—è—Ç–∏ LangChain
---

# –ü–∞–º—è—Ç—å

> **üìã –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ**: –î–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Flowise –∏ –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –¥–ª—è Universo Platformo React. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑–¥–µ–ª—ã –º–æ–≥—É—Ç –≤—Å–µ –µ—â–µ —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å Flowise, –∫–æ—Ç–æ—Ä–∞—è –µ—â–µ –Ω–µ –±—ã–ª–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π Universo Platformo.

> **üîÑ –°—Ç–∞—Ç—É—Å –ø–µ—Ä–µ–≤–æ–¥–∞**: –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –ø–µ—Ä–µ–≤–µ–¥–µ–Ω —Å –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ –∏ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –¥–ª—è —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏. –ï—Å–ª–∏ –≤—ã –∑–∞–º–µ—Ç–∏–ª–∏ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç–∏ –≤ –ø–µ—Ä–µ–≤–æ–¥–µ –∏–ª–∏ —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

***

–ü–∞–º—è—Ç—å –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –æ–±—â–∞—Ç—å—Å—è —Å –ò–ò —Ç–∞–∫, –∫–∞–∫ –±—É–¥—Ç–æ —É –ò–ò –µ—Å—Ç—å –ø–∞–º—è—Ç—å –æ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–∞—Ö.

_<mark style="color:blue;">–ß–µ–ª–æ–≤–µ–∫: –ø—Ä–∏–≤–µ—Ç, –º–µ–Ω—è –∑–æ–≤—É—Ç –ë–æ–±</mark>_

_<mark style="color:orange;">–ò–ò: –ü—Ä–∏–≤–µ—Ç, –ë–æ–±! –ü—Ä–∏—è—Ç–Ω–æ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è. –ö–∞–∫ —è –º–æ–≥—É –ø–æ–º–æ—á—å –≤–∞–º —Å–µ–≥–æ–¥–Ω—è?</mark>_

_<mark style="color:blue;">–ß–µ–ª–æ–≤–µ–∫: –∫–∞–∫ –º–µ–Ω—è –∑–æ–≤—É—Ç?</mark>_

_<mark style="color:orange;">–ò–ò: –í–∞—Å –∑–æ–≤—É—Ç –ë–æ–±, –∫–∞–∫ –≤—ã —É–ø–æ–º—è–Ω—É–ª–∏ —Ä–∞–Ω–µ–µ.</mark>_

## –ß—Ç–æ —Ç–∞–∫–æ–µ –ø–∞–º—è—Ç—å –≤ LangChain?

–ü–∞–º—è—Ç—å –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ LangChain - —ç—Ç–æ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤.

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

–ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º —ç—Ç–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤–∞—Ö –∏–ª–∏ –±–∞–∑–∞—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è LLM. –ù–∞–ø—Ä–∏–º–µ—Ä:

```
–í—ã –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —á–µ–ª–æ–≤–µ–∫–∞, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–æ–ª—å—à–æ–π —è–∑—ã–∫–æ–≤–æ–π –º–æ–¥–µ–ª–∏, –æ–±—É—á–µ–Ω–Ω–æ–π OpenAI.

–ù–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –Ω—É–∂–Ω–∞ –ª–∏ —á–µ–ª–æ–≤–µ–∫—É –ø–æ–º–æ—â—å —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –≤–æ–ø—Ä–æ—Å–æ–º –∏–ª–∏ –æ–Ω –ø—Ä–æ—Å—Ç–æ —Ö–æ—á–µ—Ç –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é —Ç–µ–º—É, –≤—ã –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å.

–¢–µ–∫—É—â–∏–π —Ä–∞–∑–≥–æ–≤–æ—Ä:
{history}
```

## –¢–∏–ø—ã –ø–∞–º—è—Ç–∏

### 1. –ë—É—Ñ–µ—Ä–Ω–∞—è –ø–∞–º—è—Ç—å (Buffer Memory)
- **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –≤–∏–¥–µ
- **–ü—Ä–æ—Å—Ç–∞—è –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–∏
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ —Ä–∞–∑–º–µ—Ä–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** –º–æ–¥–µ–ª–∏
- **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –¥–∏–∞–ª–æ–≥–æ–≤**

### 2. –û–∫–æ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å (Window Memory)
- **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–æ–æ–±—â–µ–Ω–∏–π**
- **–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**
- **–ú–æ–∂–µ—Ç —Ç–µ—Ä—è—Ç—å –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é** –∏–∑ –Ω–∞—á–∞–ª–∞ –¥–∏–∞–ª–æ–≥–∞
- **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤** —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

### 3. –°–≤–æ–¥–Ω–∞—è –ø–∞–º—è—Ç—å (Summary Memory)
- **–°–∂–∏–º–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –≤ –∫—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ
- **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–ª—é—á–µ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é** –∏–∑ –≤—Å–µ–≥–æ –¥–∏–∞–ª–æ–≥–∞
- **–¢—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã LLM** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–≤–æ–¥–æ–∫
- **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤**

### 4. –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–∞–º—è—Ç—å (Summary Buffer Memory)
- **–û–±—ä–µ–¥–∏–Ω—è–µ—Ç –±—É—Ñ–µ—Ä–Ω—É—é –∏ —Å–≤–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å**
- **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–µ–¥–∞–≤–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é**
- **–°–∂–∏–º–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –≤ —Å–≤–æ–¥–∫—É
- **–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å** –º–µ–∂–¥—É –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –∏ —Ä–∞–∑–º–µ—Ä–æ–º

### 5. –í–µ–∫—Ç–æ—Ä–Ω–∞—è –ø–∞–º—è—Ç—å (Vector Memory)
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫** –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –±–æ–ª—å—à–∏–µ –æ–±—ä–µ–º—ã** –∏—Å—Ç–æ—Ä–∏–∏
- **–ò–∑–≤–ª–µ–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ** —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã
- **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–∞–º—è—Ç–∏**

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –ø–∞–º—è—Ç–∏

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥ ‚Üí –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ ‚Üí –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ‚Üí LLM ‚Üí –û—Ç–≤–µ—Ç
         ‚Üë                    ‚Üì                    ‚Üì              ‚Üì       ‚Üì
    –ò—Å—Ç–æ—Ä–∏—è ‚Üê‚Üê –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ‚Üê‚Üê –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üê‚Üê –ö–æ–Ω—Ç–µ–∫—Å—Ç ‚Üê‚Üê –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã –ø–∞–º—è—Ç–∏:

1. **–•—Ä–∞–Ω–∏–ª–∏—â–µ** - –≥–¥–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ (–ø–∞–º—è—Ç—å, –ë–î, —Ñ–∞–π–ª—ã)
2. **–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–º—è—Ç–∏** - —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º
3. **–§–æ—Ä–º–∞—Ç—Ç–µ—Ä** - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –Ω—É–∂–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
4. **–°—Ç—Ä–∞—Ç–µ–≥–∏—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è** - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
5. **–û—á–∏—Å—Ç–∫–∞** - —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞–∑–º–µ—Ä–æ–º –∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å—é –¥–∞–Ω–Ω—ã—Ö

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏

### 1. –í—ã–±–æ—Ä —Ç–∏–ø–∞ –ø–∞–º—è—Ç–∏

```python
# –î–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –¥–∏–∞–ª–æ–≥–æ–≤ (< 10 —Å–æ–æ–±—â–µ–Ω–∏–π)
memory = ConversationBufferMemory(
    memory_key="chat_history",
    return_messages=True
)

# –î–ª—è —Å—Ä–µ–¥–Ω–∏—Ö –¥–∏–∞–ª–æ–≥–æ–≤ (10-50 —Å–æ–æ–±—â–µ–Ω–∏–π)
memory = ConversationBufferWindowMemory(
    k=10,  # –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π
    memory_key="chat_history",
    return_messages=True
)

# –î–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤ (> 50 —Å–æ–æ–±—â–µ–Ω–∏–π)
memory = ConversationSummaryBufferMemory(
    llm=ChatOpenAI(temperature=0),
    max_token_limit=1000,
    memory_key="chat_history",
    return_messages=True
)

# –î–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–∞–º—è—Ç–∏
memory = VectorStoreRetrieverMemory(
    retriever=vectorstore.as_retriever(search_kwargs=dict(k=5)),
    memory_key="chat_history"
)
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

```yaml
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
customer_support:
  type: "ConversationSummaryBufferMemory"
  max_token_limit: 2000
  summary_prompt: "–ö—Ä–∞—Ç–∫–æ –∏–∑–ª–æ–∂–∏ –∫–ª—é—á–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∫–ª–∏–µ–Ω—Ç–∞ –∏ –ø—Ä–µ–¥–ø—Ä–∏–Ω—è—Ç—ã–µ –¥–µ–π—Å—Ç–≤–∏—è"
  
educational_assistant:
  type: "ConversationBufferWindowMemory"
  k: 15
  include_metadata: true
  
personal_assistant:
  type: "VectorStoreRetrieverMemory"
  retriever_k: 10
  similarity_threshold: 0.8
```

### 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

```python
class ContextManager:
    def __init__(self, memory, max_context_length=4000):
        self.memory = memory
        self.max_context_length = max_context_length
    
    def get_context(self, current_input):
        # –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–∑ –ø–∞–º—è—Ç–∏
        history = self.memory.load_memory_variables({})
        
        # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
        context_size = self.estimate_token_count(history, current_input)
        
        if context_size > self.max_context_length:
            # –°–∂–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
            history = self.compress_context(history)
        
        return history
    
    def compress_context(self, history):
        # –õ–æ–≥–∏–∫–∞ —Å–∂–∞—Ç–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
        # –ú–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—é –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
        pass
```

## –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø–∞–º—è—Ç–∏

### 1. –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ

```python
# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª
import pickle

def save_memory(memory, filename):
    with open(filename, 'wb') as f:
        pickle.dump(memory.chat_memory, f)

def load_memory(filename):
    with open(filename, 'rb') as f:
        chat_memory = pickle.load(f)
    
    memory = ConversationBufferMemory()
    memory.chat_memory = chat_memory
    return memory
```

### 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

```python
# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Redis
from langchain.memory import RedisChatMessageHistory

memory = ConversationBufferMemory(
    chat_memory=RedisChatMessageHistory(
        session_id="user_123",
        url="redis://localhost:6379"
    ),
    memory_key="chat_history",
    return_messages=True
)
```

### 3. –û–±–ª–∞—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

```python
# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MongoDB Atlas
from langchain.memory import MongoDBChatMessageHistory

memory = ConversationBufferMemory(
    chat_memory=MongoDBChatMessageHistory(
        connection_string="mongodb+srv://...",
        session_id="user_123",
        database_name="chat_history",
        collection_name="conversations"
    )
)
```

## –£–∑–ª—ã –ø–∞–º—è—Ç–∏:

* [–ë—É—Ñ–µ—Ä–Ω–∞—è –ø–∞–º—è—Ç—å](buffer-memory.md)
* [–û–∫–æ–Ω–Ω–∞—è –±—É—Ñ–µ—Ä–Ω–∞—è –ø–∞–º—è—Ç—å](buffer-window-memory.md)
* [–°–≤–æ–¥–Ω–∞—è –ø–∞–º—è—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä–∞](conversation-summary-memory.md)
* [–°–≤–æ–¥–Ω–∞—è –±—É—Ñ–µ—Ä–Ω–∞—è –ø–∞–º—è—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä–∞](conversation-summary-buffer-memory.md)
* [–ü–∞–º—è—Ç—å —á–∞—Ç–∞ DynamoDB](dynamodb-chat-memory.md)
* [–ü–∞–º—è—Ç—å Mem0](mem0-memory.md)
* [–ü–∞–º—è—Ç—å —á–∞—Ç–∞ MongoDB Atlas](mongodb-atlas-chat-memory.md)
* [–ü–∞–º—è—Ç—å —á–∞—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ Redis](redis-backed-chat-memory.md)
* [–ü–∞–º—è—Ç—å —á–∞—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ Upstash Redis](upstash-redis-backed-chat-memory.md)
* [–ü–∞–º—è—Ç—å Zep](zep-memory.md)

## –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### UI –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —á–∞—Ç

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é UI –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —á–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–¥–µ–ª—è—é—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä—ã —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –ø—É—Ç–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ **`chatId`** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–æ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è. –≠—Ç–∞ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º Flowise.

### Prediction API

–í—ã –º–æ–∂–µ—Ç–µ —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä—ã –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É–∫–∞–∑–∞–≤ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π **`sessionId`**

1. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞ –ø–∞–º—è—Ç–∏ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –≤—Ö–æ–¥–Ω–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä **`Session ID`**

<figure><img src="../../../.gitbook/assets/image (76).png" alt="" width="563"><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/Untitled (1) (1) (1) (1) (1) (1).png" alt="" width="563"><figcaption></figcaption></figure>

2. –í POST –∑–∞–ø—Ä–æ—Å–µ `/api/v1/prediction/{your-canvasid}` —É–∫–∞–∂–∏—Ç–µ **`sessionId`** –≤ **`overrideConfig`**

```json
{
    "question": "–ø—Ä–∏–≤–µ—Ç!",
    "overrideConfig": {
        "sessionId": "user1"
    }
}
```

### Message API

* GET `/api/v1/chatmessage/{your-canvasid}`
* DELETE `/api/v1/chatmessage/{your-canvasid}`

<table><thead><tr><th>–ü–∞—Ä–∞–º–µ—Ç—Ä –∑–∞–ø—Ä–æ—Å–∞</th><th width="192">–¢–∏–ø</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th></tr></thead><tbody><tr><td>sessionId</td><td>string</td><td></td></tr><tr><td>sort</td><td>enum</td><td>ASC –∏–ª–∏ DESC</td></tr><tr><td>startDate</td><td>string</td><td></td></tr><tr><td>endDate</td><td>string</td><td></td></tr></tbody></table>

–í—Å–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã –º–æ–∂–Ω–æ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–º–∏ –∏–∑ UI:

<figure><img src="../../../.gitbook/assets/image (78).png" alt=""><figcaption></figcaption></figure>

–î–ª—è OpenAI Assistant –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è [Threads](../agents/openai-assistant/threads.md) –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤.

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏

### 1. –ú–µ—Ç—Ä–∏–∫–∏ –ø–∞–º—è—Ç–∏

```python
class MemoryMonitor:
    def __init__(self):
        self.metrics = {
            "memory_size": 0,
            "context_length": 0,
            "retrieval_time": 0,
            "compression_ratio": 0
        }
    
    def track_memory_usage(self, memory):
        # –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏
        self.metrics["memory_size"] = len(memory.chat_memory.messages)
        self.metrics["context_length"] = self.calculate_context_length(memory)
    
    def optimize_memory(self, memory):
        # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Ç—Ä–∏–∫
        if self.metrics["context_length"] > 4000:
            return self.compress_memory(memory)
        return memory
```

### 2. A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –ø–∞–º—è—Ç–∏

```python
class MemoryStrategy:
    def __init__(self, strategy_type, config):
        self.strategy_type = strategy_type
        self.config = config
        self.performance_metrics = {}
    
    def evaluate_performance(self, conversations):
        # –û—Ü–µ–Ω–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–∞–º—è—Ç–∏
        metrics = {
            "response_quality": self.measure_response_quality(conversations),
            "context_relevance": self.measure_context_relevance(conversations),
            "memory_efficiency": self.measure_memory_efficiency(conversations)
        }
        return metrics
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å

### 1. –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

```python
from cryptography.fernet import Fernet

class EncryptedMemory:
    def __init__(self, base_memory, encryption_key):
        self.base_memory = base_memory
        self.cipher = Fernet(encryption_key)
    
    def save_context(self, inputs, outputs):
        # –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
        encrypted_inputs = self.encrypt_data(inputs)
        encrypted_outputs = self.encrypt_data(outputs)
        self.base_memory.save_context(encrypted_inputs, encrypted_outputs)
    
    def load_memory_variables(self, inputs):
        # –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        encrypted_memory = self.base_memory.load_memory_variables(inputs)
        return self.decrypt_data(encrypted_memory)
```

### 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏

```python
class SessionManager:
    def __init__(self):
        self.active_sessions = {}
        self.session_timeout = 3600  # 1 —á–∞—Å
    
    def create_session(self, user_id):
        session_id = self.generate_session_id()
        self.active_sessions[session_id] = {
            "user_id": user_id,
            "created_at": time.time(),
            "memory": self.create_memory_for_user(user_id)
        }
        return session_id
    
    def cleanup_expired_sessions(self):
        current_time = time.time()
        expired_sessions = [
            sid for sid, session in self.active_sessions.items()
            if current_time - session["created_at"] > self.session_timeout
        ]
        
        for sid in expired_sessions:
            del self.active_sessions[sid]
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü–∞–º—è—Ç—å —è–≤–ª—è–µ—Ç—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-–æ—Å–≤–µ–¥–æ–º–ª–µ–Ω–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä —Ç–∏–ø–∞ –ø–∞–º—è—Ç–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –¥–∞–Ω–Ω—ã—Ö –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞.

–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —É—Å–ø–µ—à–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏:
- **–í—ã–±–∏—Ä–∞–π—Ç–µ —Ç–∏–ø –ø–∞–º—è—Ç–∏** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–ª–∏–Ω—ã –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –¥–∏–∞–ª–æ–≥–æ–≤
- **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- **–û–±–µ—Å–ø–µ—á–∏–≤–∞–π—Ç–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
- **–ó–∞—â–∏—â–∞–π—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** —Å –ø–æ–º–æ—â—å—é —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
- **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
