# –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è

> **üìã –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ**: –î–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Flowise –∏ –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –¥–ª—è Universo Platformo React. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑–¥–µ–ª—ã –º–æ–≥—É—Ç –≤—Å–µ –µ—â–µ —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å Flowise, –∫–æ—Ç–æ—Ä–∞—è –µ—â–µ –Ω–µ –±—ã–ª–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π Universo Platformo.

> **üîÑ –°—Ç–∞—Ç—É—Å –ø–µ—Ä–µ–≤–æ–¥–∞**: –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –ø–µ—Ä–µ–≤–µ–¥–µ–Ω —Å –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ –∏ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –¥–ª—è —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏. –ï—Å–ª–∏ –≤—ã –∑–∞–º–µ—Ç–∏–ª–∏ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç–∏ –≤ –ø–µ—Ä–µ–≤–æ–¥–µ –∏–ª–∏ —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

Prediction API —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–æ–π –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –≤–∞—à–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏ Flowise –∏ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞–º–∏. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ –∏ –ø–æ–ª—É—á–∞—Ç—å –æ—Ç–≤–µ—Ç—ã –æ–±—Ä–∞—Ç–Ω–æ. –≠—Ç–æ—Ç API –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —á–∞—Ç–∞, –≤–∫–ª—é—á–∞—è:

* **–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –≤ —á–∞—Ç–µ**: –û—Ç–ø—Ä–∞–≤–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –≤–∞—à –ø–æ—Ç–æ–∫ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ò–ò
* **–ü–æ—Ç–æ–∫–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã**: –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞
* **–ü–∞–º—è—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä–∞**: –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –≤ —Ä–∞–º–∫–∞—Ö —Å–µ—Å—Å–∏–∏
* **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤**: –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –∞—É–¥–∏–æ –∏ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–æ–≤ –∫–∞–∫ —á–∞—Å—Ç–∏ –≤–∞—à–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
* **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —á–∞—Ç-–ø–æ—Ç–æ–∫–∞ –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–î–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π —Å–º–æ—Ç—Ä–∏—Ç–µ [—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ API –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–∏ Prediction](../api-reference/prediction.md).

## –ë–∞–∑–æ–≤—ã–π URL –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**–ë–∞–∑–æ–≤—ã–π URL**: `http://localhost:3000` (–∏–ª–∏ URL –≤–∞—à–µ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ Flowise)

**–ö–æ–Ω–µ—á–Ω–∞—è —Ç–æ—á–∫–∞**: `POST /api/v1/prediction/:id`

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ [–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤](../configuration/authorization/canvas-level.md)

## –§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞

#### –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞

```json
{
    "question": "–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∑–¥–µ—Å—å",
    "streaming": false,
    "overrideConfig": {},
    "history": [],
    "uploads": [],
    "form": {}
}
```

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä         | –¢–∏–ø     | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π                | –û–ø–∏—Å–∞–Ω–∏–µ                                    |
| ---------------- | ------- | --------------------------- | ------------------------------------------- |
| `question`       | string  | –î–∞                          | –°–æ–æ–±—â–µ–Ω–∏–µ/–≤–æ–ø—Ä–æ—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –ø–æ—Ç–æ–∫       |
| `form`           | object  | –õ–∏–±–æ `question`, –ª–∏–±–æ `form` | –û–±—ä–µ–∫—Ç —Ñ–æ—Ä–º—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –ø–æ—Ç–æ–∫           |
| `streaming`      | boolean | –ù–µ—Ç                         | –í–∫–ª—é—á–∏—Ç—å –ø–æ—Ç–æ–∫–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: false) |
| `overrideConfig` | object  | –ù–µ—Ç                         | –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–æ—Ç–æ–∫–∞          |
| `history`        | array   | –ù–µ—Ç                         | –ü—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞              |
| `uploads`        | array   | –ù–µ—Ç                         | –§–∞–π–ª—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∞—É–¥–∏–æ –∏ —Ç.–¥.) |
| `humanInput`     | object  | –ù–µ—Ç                         | –í–µ—Ä–Ω—É—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å —á–µ–ª–æ–≤–µ–∫–∞ –∏ –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ |

## SDK –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

Flowise –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ SDK –¥–ª—è Python –∏ TypeScript/JavaScript:

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

**Python**: `pip install flowise`

**TypeScript/JavaScript**: `npm install flowise-sdk`

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å

```python
# Python
import requests

url = "http://localhost:3000/api/v1/prediction/your-canvas-id"
data = {
    "question": "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?"
}

response = requests.post(url, json=data)
result = response.json()
print(result["text"])
```

```javascript
// JavaScript
const response = await fetch('http://localhost:3000/api/v1/prediction/your-canvas-id', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify({
        question: "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?"
    })
});

const result = await response.json();
console.log(result.text);
```

### 2. –ü–æ—Ç–æ–∫–æ–≤—ã–π –æ—Ç–≤–µ—Ç

```python
# Python —Å –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–µ–π
import requests
import json

url = "http://localhost:3000/api/v1/prediction/your-canvas-id"
data = {
    "question": "–†–∞—Å—Å–∫–∞–∂–∏ –¥–ª–∏–Ω–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é",
    "streaming": True
}

response = requests.post(url, json=data, stream=True)

for line in response.iter_lines():
    if line:
        chunk = line.decode('utf-8')
        if chunk.startswith('data: '):
            data = chunk[6:]  # –£–±–∏—Ä–∞–µ–º 'data: '
            if data != '[DONE]':
                try:
                    parsed = json.loads(data)
                    print(parsed.get('text', ''), end='', flush=True)
                except json.JSONDecodeError:
                    continue
```

```javascript
// JavaScript —Å –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–µ–π
const response = await fetch('http://localhost:3000/api/v1/prediction/your-canvas-id', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify({
        question: "–†–∞—Å—Å–∫–∞–∂–∏ –¥–ª–∏–Ω–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é",
        streaming: true
    })
});

const reader = response.body.getReader();
const decoder = new TextDecoder();

while (true) {
    const { done, value } = await reader.read();
    if (done) break;
    
    const chunk = decoder.decode(value);
    const lines = chunk.split('\n');
    
    for (const line of lines) {
        if (line.startsWith('data: ')) {
            const data = line.slice(6);
            if (data !== '[DONE]') {
                try {
                    const parsed = JSON.parse(data);
                    process.stdout.write(parsed.text || '');
                } catch (e) {
                    // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
                }
            }
        }
    }
}
```

### 3. –ó–∞–ø—Ä–æ—Å —Å –∏—Å—Ç–æ—Ä–∏–µ–π —Ä–∞–∑–≥–æ–≤–æ—Ä–∞

```python
# Python —Å –∏—Å—Ç–æ—Ä–∏–µ–π
data = {
    "question": "–ê —á—Ç–æ –Ω–∞—Å—á–µ—Ç Python?",
    "history": [
        {
            "role": "user",
            "content": "–†–∞—Å—Å–∫–∞–∂–∏ –æ —è–∑—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è"
        },
        {
            "role": "assistant", 
            "content": "–Ø–∑—ã–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è - —ç—Ç–æ —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–µ —è–∑—ã–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º..."
        }
    ]
}

response = requests.post(url, json=data)
```

### 4. –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```python
# –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
data = {
    "question": "–û–±—ä—è—Å–Ω–∏ –∫–≤–∞–Ω—Ç–æ–≤—É—é —Ñ–∏–∑–∏–∫—É",
    "overrideConfig": {
        "temperature": 0.1,  # –ë–æ–ª–µ–µ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
        "maxTokens": 500,    # –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–ª–∏–Ω—É –æ—Ç–≤–µ—Ç–∞
        "systemMessage": "–¢—ã —Ñ–∏–∑–∏–∫-—Ç–µ–æ—Ä–µ—Ç–∏–∫. –û–±—ä—è—Å–Ω—è–π —Å–ª–æ–∂–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º.",
        "sessionId": "user_123"  # –î–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–π
    }
}
```

### 5. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤

```python
# –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
import base64

# –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ base64
with open("image.jpg", "rb") as image_file:
    encoded_image = base64.b64encode(image_file.read()).decode('utf-8')

data = {
    "question": "–ß—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–æ –Ω–∞ —ç—Ç–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–µ?",
    "uploads": [
        {
            "data": f"data:image/jpeg;base64,{encoded_image}",
            "type": "file",
            "name": "image.jpg",
            "mime": "image/jpeg"
        }
    ]
}
```

## –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –†–∞–±–æ—Ç–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏

```python
# –ü–µ—Ä–µ–¥–∞—á–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ —á–∞—Ç-–ø–æ—Ç–æ–∫
data = {
    "question": "–°–æ–∑–¥–∞–π –æ—Ç—á–µ—Ç –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞",
    "overrideConfig": {
        "vars": {
            "client_name": "–û–û–û –†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞",
            "report_type": "monthly",
            "api_key": "secret_key_123"
        }
    }
}
```

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º

```python
# –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É
data = {
    "form": {
        "customer_info": {
            "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
            "email": "ivan@example.com",
            "phone": "+7-123-456-7890"
        },
        "request_type": "support",
        "priority": "high",
        "description": "–ü—Ä–æ–±–ª–µ–º–∞ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –≤ —Å–∏—Å—Ç–µ–º–µ"
    }
}
```

### 3. Human-in-the-loop

```python
# –í–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ —á–µ–ª–æ–≤–µ–∫–∞
data = {
    "question": "",  # –ü—É—Å—Ç–æ–π –¥–ª—è –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    "humanInput": {
        "action": "approve",
        "feedback": "–û–¥–æ–±—Ä–µ–Ω–æ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è",
        "data": {
            "approved_amount": 50000,
            "approval_code": "APPR-2024-001"
        }
    }
}
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∞

```python
import requests
from requests.exceptions import RequestException, Timeout

def safe_prediction_request(url, data, timeout=30):
    try:
        response = requests.post(url, json=data, timeout=timeout)
        response.raise_for_status()  # –í—ã–∑–æ–≤–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è HTTP –æ—à–∏–±–æ–∫
        
        result = response.json()
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—à–∏–±–∫–∏ –≤ –æ—Ç–≤–µ—Ç–µ
        if 'error' in result:
            print(f"–û—à–∏–±–∫–∞ API: {result['error']}")
            return None
            
        return result
        
    except Timeout:
        print("–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞")
        return None
        
    except RequestException as e:
        print(f"–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: {e}")
        return None
        
    except ValueError as e:
        print(f"–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON: {e}")
        return None
        
    except Exception as e:
        print(f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {e}")
        return None

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
result = safe_prediction_request(url, data)
if result:
    print(result.get('text', '–ù–µ—Ç —Ç–µ–∫—Å—Ç–∞ –≤ –æ—Ç–≤–µ—Ç–µ'))
```

### Retry –ª–æ–≥–∏–∫–∞

```python
import time
import random

def prediction_with_retry(url, data, max_retries=3, backoff_factor=2):
    for attempt in range(max_retries):
        try:
            response = requests.post(url, json=data, timeout=30)
            response.raise_for_status()
            return response.json()
            
        except requests.exceptions.RequestException as e:
            if attempt == max_retries - 1:
                raise e
                
            wait_time = backoff_factor ** attempt + random.uniform(0, 1)
            print(f"–ü–æ–ø—ã—Ç–∫–∞ {attempt + 1} –Ω–µ—É–¥–∞—á–Ω–∞. –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ {wait_time:.2f} —Å–µ–∫...")
            time.sleep(wait_time)
    
    return None
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤

```python
import logging
import time
from datetime import datetime

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler('flowise_requests.log'),
        logging.StreamHandler()
    ]
)

logger = logging.getLogger(__name__)

def logged_prediction(url, data, canvas_id):
    start_time = time.time()
    request_id = f"req_{int(time.time())}_{random.randint(1000, 9999)}"
    
    logger.info(f"[{request_id}] –ù–∞—á–∞–ª–æ –∑–∞–ø—Ä–æ—Å–∞ –∫ {canvas_id}")
    logger.debug(f"[{request_id}] –î–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞: {data}")
    
    try:
        response = requests.post(url, json=data)
        response.raise_for_status()
        result = response.json()
        
        duration = time.time() - start_time
        logger.info(f"[{request_id}] –ó–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ –∑–∞ {duration:.2f}—Å")
        
        return result
        
    except Exception as e:
        duration = time.time() - start_time
        logger.error(f"[{request_id}] –û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∑–∞ {duration:.2f}—Å: {e}")
        raise
```

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```python
class PredictionMetrics:
    def __init__(self):
        self.requests_count = 0
        self.total_duration = 0
        self.error_count = 0
        self.response_times = []
    
    def record_request(self, duration, success=True):
        self.requests_count += 1
        self.total_duration += duration
        self.response_times.append(duration)
        
        if not success:
            self.error_count += 1
    
    def get_stats(self):
        if self.requests_count == 0:
            return {"message": "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö"}
        
        avg_response_time = self.total_duration / self.requests_count
        success_rate = (self.requests_count - self.error_count) / self.requests_count * 100
        
        return {
            "total_requests": self.requests_count,
            "success_rate": f"{success_rate:.2f}%",
            "avg_response_time": f"{avg_response_time:.2f}s",
            "min_response_time": f"{min(self.response_times):.2f}s",
            "max_response_time": f"{max(self.response_times):.2f}s"
        }

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
metrics = PredictionMetrics()

def tracked_prediction(url, data):
    start_time = time.time()
    success = False
    
    try:
        result = requests.post(url, json=data).json()
        success = True
        return result
    finally:
        duration = time.time() - start_time
        metrics.record_request(duration, success)
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

Prediction API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—ã–π –∏ –≥–∏–±–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –≤–∞—à–∏–º–∏ —á–∞—Ç-–ø–æ—Ç–æ–∫–∞–º–∏ Flowise. –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π API, –≤–∫–ª—é—á–∞—è –ø–æ—Ç–æ–∫–æ–≤—É—é –ø–µ—Ä–µ–¥–∞—á—É, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏, –æ–±—Ä–∞–±–æ—Ç–∫—É —Ñ–∞–π–ª–æ–≤ –∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π, –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –±–æ–≥–∞—Ç—ã–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —É—Å–ø–µ—à–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
- **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏ gracefully** —Å retry –ª–æ–≥–∏–∫–æ–π
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ—Ç–æ–∫–æ–≤—É—é –ø–µ—Ä–µ–¥–∞—á—É** –¥–ª—è –ª—É—á—à–µ–≥–æ UX
- **–õ–æ–≥–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** —Å –ø–æ–º–æ—â—å—é –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—É–ª–∏–Ω–≥–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏** –ø–µ—Ä–µ–¥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
